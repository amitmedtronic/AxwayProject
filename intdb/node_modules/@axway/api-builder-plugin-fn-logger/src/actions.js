const ALLOWED_LEVELS = [ 'error', 'warn', 'info', 'debug', 'trace' ];

/**
 * Logs a message at the desired log level.
 *
 * @param {object} params - A map of all the parameters passed from the flow.
 * @param {string} params.message - The message to be logged.
 * @param {string} [params.level=info] - The desired log level.
 * @param {object} options - The additional options provided from the flow
 *	 engine.
 * @param {object} options.logger - The API Builder logger.
 * @throws {Error} if log level is invalid/unsupported.
 */
async function log(params, { logger }) {
	const { level = 'info' } = params;

	if (!ALLOWED_LEVELS.includes(level)) {
		throw new Error(`Invalid log level: ${level}`);
	}

	logger[level](params.message);
}

module.exports = {
	log
};
