const mustache = require('mustache');

module.exports = {
	format: (params) => {
		const { template, data } = params;
		let str;
		try {
			str = mustache.render(template, { data });
		} catch (err) {
			throw new Error(formatMsg(err));
		}

		return str;
	}
};

function formatMsg(err) {
	let msg = err.message;
	msg = msg.replace(' as the first argument for mustache#render(template, view, partials)', '');
	if (!msg.startsWith('Invalid template!')) {
		msg = `Invalid template! ${msg}`;
	}
	return msg;
}
