const APIProvider = require('../APIProvider');
const Components = require('./Components');

class ComponentsAPI extends APIProvider {
	static bind(controller) {
		const swagger = controller.ctx.swagger;

		swagger
			.schema('Components', Components.schema);

		swagger
			.get('/components')
			.operationId('getComponents')
			.tag('components')
			.summary('Gets an array of components')
			.response(200, 'OK', 'Components', true)
			.response(500)
			.action((req, res) => {
				try {
					const components = controller.getComponents();
					res.status(200).send(components);
				} catch (err) {
					APIProvider.handleError(err, res, 500);
				}
			});
	}
}

module.exports = ComponentsAPI;
